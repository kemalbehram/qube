(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{MVap:function(t,e,s){"use strict";s.r(e);var n=s("mrSG"),a=s("CcnG"),i=s("Ip0R"),o=s("PSRr"),r=s("3EpR"),l=s("gbi4"),c=s("4GxJ"),d=s("SbLv"),u=s("sE5F"),p=s("RH9n"),m=function(){function t(t,e,s,n,a,i){this.socket=t,this.toastr=e,this.modalService=s,this.CommonService=n,this.cookieService=a,this.http=i,this.userrows=[],this.userlist=[],this.usertemp=[],this.limits=[{key:"10",value:10},{key:"25",value:25},{key:"50",value:50},{key:"100",value:100}],this.page={size:this.limits[0].value,totalElements:0,totalPages:0,pageNumber:0},this.defsort={dir:"desc",prop:"createddate"},this.defsearch="",this.ipaddress="",this.ipDatas={},this.ipFromSubmit=!1,this.loading=!1,this.rowLimits=this.limits,this.limit=this.limits[0].value,this.bannersvalue={},this.banner=""}return t.prototype.ngOnInit=function(){this.CommonService.sessioncheck(),this.CommonService.ipcheck(),this.loadbank()},t.prototype.loadbank=function(){var t=this,e={page:this.page,sorting:this.defsort,search:this.defsearch};this.loading=!0,this.CommonService.requestData("admin/IPblockhistory",e).subscribe(function(e){t.page.totalElements=e.currencycount,t.page.totalPages=t.page.totalElements/t.page.size,t.userlist=e.data,t.usertemp=t.userlist,t.userrows=t.userlist,t.loading=!1})},t.prototype.loaduserlist=function(t,e,s){var n=this;this.loading=!0;var a={page:t,sorting:e,search:s};this.CommonService.requestData("admin/IPblockhistory",a).subscribe(function(t){n.userlist=t.data,n.usertemp=n.userlist,n.userrows=n.userlist,n.loading=!1})},t.prototype.changeRowLimits=function(t){this.userlist=[],this.usertemp=this.userlist,this.userrows=this.userlist,this.page.size=+t.target.value,this.page.pageNumber=0,this.usertable.limit=t.target.value,this.loaduserlist(this.page,this.defsort,this.defsearch)},t.prototype.resetuserlist=function(){var t=this;this.limits=[{key:"10",value:10},{key:"25",value:25},{key:"50",value:50},{key:"100",value:100}],this.limit=this.limits[0].value,this.rowLimits=this.limits,this.page={size:this.limits[0].value,totalElements:0,totalPages:0,pageNumber:0},this.defsort={dir:"desc",prop:"createddate"},this.defsearch="";var e={page:this.page,sorting:this.defsort,search:this.defsearch};this.loading=!0,this.CommonService.requestData("admin/IPblockhistory",e).subscribe(function(e){t.page.totalElements=e.currencycount,t.page.totalPages=t.page.totalElements/t.page.size,t.userlist=e.data,t.usertemp=t.userlist,t.userrows=t.userlist,t.loading=!1})},t.prototype.updateFilter=function(){var t=this;this.loading=!0;var e={page:this.page,sorting:this.defsort,search:this.defsearch};this.CommonService.requestData("admin/IPblockhistory",e).subscribe(function(e){t.page.totalElements=e.currencycount,t.page.totalPages=t.page.totalElements/t.page.size,t.userlist=e.data,t.usertemp=t.userlist,t.userrows=t.userlist,t.loading=!1})},t.prototype.setPage=function(t){this.userlist=[],this.usertemp=this.userlist,this.userrows=this.userlist,this.page.pageNumber=t.offset,this.loaduserlist(this.page,this.defsort,this.defsearch)},t.prototype.onSort=function(t){this.page.pageNumber=0,this.defsort=t.sorts[0],this.loaduserlist(this.page,this.defsort,this.defsearch)},t.prototype.changehost=function(t,e){this.bannersvalue=e,this.modalRef=this.modalService.open(t,{size:"sm"})},t.prototype.changebannerStatus=function(t){var e=this;1==t.status?this.bannersvalue=0:this.bannersvalue=1,this.currencyObj={_id:t._id,status:this.bannersvalue,user_ip:t.user_ip},this.CommonService.requestData("admin/ipstatus",this.currencyObj).subscribe(function(t){if(t){var s={row_id:e.currencyObj._id,status:e.currencyObj.status,user_ip:e.currencyObj.user_ip};e.socket.emit("ipblock",s),e.toastr.successToastr("IP Address status changed Successfully!","Success"),e.loadbank()}})},t.prototype.openbannermodel=function(t){var e=this;this.ipDatas={},this.modalRef=this.modalService.open(t,{size:"lg"}),this.modalRef.result.then(function(t){e.closeResult="Closed with: "+t},function(t){e.closeResult="Dismissed "+e.getDismissReason(t)})},t.prototype.getDismissReason=function(t){return t===c.a.ESC?"by pressing ESC":t===c.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ${reason}"},t.prototype.addIP=function(){var t=this;if(this.ipFromSubmit=!0,0==this.ipDatas.user_ip.replace(/\s/g,""))return this.toastr.errorToastr("Enter the valid IP address","Error !"),!1;var e={user_ip:this.ipDatas.user_ip,status:1};this.CommonService.requestData("admin/addIpToBlock",e).subscribe(function(e){e.status?(t.clearmodel(),t.toastr.successToastr(e.msg,""),t.ipFromSubmit=!1,t.loadbank()):(t.toastr.errorToastr(e.msg,""),t.ipFromSubmit=!1,t.loadbank())})},t.prototype.clearmodel=function(){this.modalRef&&this.modalRef.close()},t.prototype.opendeletemodel=function(t,e){this.modalRef=this.modalService.open(t,{size:"lg"}),this.bannersvalue=e},t.prototype.delete_ip=function(t){var e=this;this.CommonService.requestData("admin/deleteip",t).subscribe(function(t){e.toastr.successToastr(t.msg,"Success!"),e.loadbank(),e.modalRef.close()})},t.ctorParameters=function(){return[{type:p.a},{type:r.a},{type:c.b},{type:l.a},{type:d.a},{type:u.b}]},n.c([Object(a.nb)(o.a,{static:!1}),n.f("design:type",o.a)],t.prototype,"usertable",void 0),t=n.c([Object(a.n)({selector:"app-ipblock",template:s("uvZ8"),styles:[s("nl5A")]}),n.f("design:paramtypes",[p.a,r.a,c.b,l.a,d.a,u.b])],t)}(),b=s("ZYCi"),g=[{path:"",component:m,data:{title:"ipblock"}}],h=function(){function t(){}return t=n.c([Object(a.K)({declarations:[],imports:[i.b,b.d.forChild(g)],exports:[b.d]})],t)}(),v=s("gIcY");s.d(e,"IpblockModule",function(){return y});var f={url:""},y=function(){function t(){}return t=n.c([Object(a.K)({declarations:[m],imports:[i.b,h,v.a,o.b,u.c,p.b.forRoot(f)]})],t)}()},nl5A:function(t,e){t.exports=""},uvZ8:function(t,e){t.exports='<div class="card">\n    <div class="card-header" style="background-color:#2f353a;color:#33adff;">\n          <i class="fa fa-align-justify"></i> IP Block Management\n        </div>\n\n\n\x3c!-- <h4 style="padding-left: 425px;">Manage Users</h4> --\x3e\n<div class="tabcntcls" style=" -webkit-transition: all 1s ease;transition: all 1s ease;padding: 25px;">\n  <div class="row">\n    <div class="col-md-9 align-items-center" style="display: inline-flex;padding-left: 0px;">\n      <span>Display : </span>\n      <select (change)="changeRowLimits($event)" style="width: auto;background: transparent;height: 30px;margin-left: 5px;">\n          <option *ngFor="let limit of rowLimits" [value]="limit.value">{{limit.key}}</option>\n      </select>\n\n      <div class="input-group-btn" style="margin-left: 10px;">\n        <button class="btn btn-primary button-refresh" style="cursor:pointer;" type="submit"  (click)="resetuserlist()">\n           <i class="fa fa-refresh" aria-hidden="true"></i>\n        </button>\n      </div>\n\n    </div>\n    <div class="col-md-3">\n\n        <div class="input-group">\n          <input type="text" [(ngModel)]="defsearch" class="form-control" placeholder="Search" id="txtSearch" (keyup.enter)="updateFilter()"  \n          (keyfocus)="updateFilter()"/>\n          <div class="input-group-btn">\n            <button class="btn btn-primary" style="cursor:pointer; margin-left: -2px;" type="submit" (click)="updateFilter()">\n              <span class="fa fa-search"></span>\n            </button>\n          </div>\n        </div>\n\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-3">\n      \x3c!-- <h6 class="align-items-center">Add Ip Here:</h6> --\x3e\n    </div>\n    <div class="col-md-9 align-items-center" style="display: inline-flex;padding-left: 0px;">\n      <span>IP address : </span>\n      <div class="col-md-5 input-group">\n        <input type="text" [(ngModel)]="ipaddress" class="form-control" placeholder="Search" id="txtSearch"/>\n        <div class="input-group-btn">\n        </div>\n      </div>\n\n      <div class=" col-md-4 input-group-btn" style="margin-left: 10px;">\n        <button class="btn btn-primary button-refresh" style="cursor:pointer;" type="submit"  (click)="openbannermodel(addbannercontent)">Add IP\n        </button>\n      </div>\n\n    </div>\n  </div>\n\n \n  <div class="table-responsive tab_top">\n    <ngx-datatable #usertable class="bootstrap table table-bordered table-striped mb-0 material"\n\n    [columnMode]="\'force\'"\n    [headerHeight]="30"\n    [footerHeight]="50"\n    [rowHeight]="\'auto\'" [(limit)]="limit" [rows]=\'userrows\' [externalPaging]="true"\n        [count]="page.totalElements"\n        [offset]="page.pageNumber"\n        [limit]="page.size"\n        [scrollbarH]="true"\n        (page)=\'setPage($event)\' [externalSorting]="true" (sort)="onSort($event)" [loadingIndicator]="loading">\n\n    <ngx-datatable-column name="S.No" [width]="50">\n      <ng-template let-rowIndex="rowIndex" let-row="row" ngx-datatable-cell-template>\n        \x3c!-- {{row.$$index + 1}} --\x3e\n        \x3c!-- {{rowIndex + 1}} --\x3e\n        {{(page.pageNumber*page.size)+(rowIndex + 1)}}\n      </ng-template>\n    </ngx-datatable-column>\n  \x3c!--    <ngx-datatable-column name="Email Id"  prop="emailid">\n      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>\n        {{value}}\n      </ng-template>\n    </ngx-datatable-column> --\x3e\n     \x3c!-- <ngx-datatable-column name="Login Attempt"  prop="loginattempt">\n      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>\n        {{value}}\n      </ng-template>\n    </ngx-datatable-column> --\x3e\n      <ngx-datatable-column name="IP Address"  prop="user_ip">\n      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>\n        {{value}}\n      </ng-template>\n    </ngx-datatable-column>\n      <ngx-datatable-column name="Status" prop="status">\n      <ng-template ngx-datatable-cell-template let-value="value" let-row="row" >\n    \n      <span class="tfadisable"  *ngIf="row.status ==1"  style="color: green;" >Active</span>\n     <span class="enable"  *ngIf="row.status==0"  style="color: red;">Deactive </span>\n        </ng-template>\n      </ngx-datatable-column>\n\n  <ngx-datatable-column name="Action" [resizeable]="false" prop="_id" >\n    <ng-template ngx-datatable-cell-template let-value="value"   let-row="row">\n  \n\n    <button class="btn btn-link mr-1 mb-1 cursorcls"  \n             (click)="changehost(statusmodel, row)"\n                 style="color:#b4b4b4;" >\n               <i  *ngIf="row.status == 1"  style="color: #1FA86D" class="ace-icon fa fa-unlock bigger-130" aria-hidden="true" ngbTooltip="Move to Deactive"></i>\n              <i  *ngIf="row.status == 0" style="color: #E51F1F" class="ace-icon fa fa-lock bigger-130" aria-hidden="true" ngbTooltip="Move to Active"></i>\n            </button>\n            <button class="btn btn-link mr-1 mb-1 cursorcls" \n     (click)="opendeletemodel(deletecontent,row)"  ngbTooltip="View">\n      <i class="fa fa-trash" style="color:blue"></i>\n    </button>\n   </ng-template>\n </ngx-datatable-column>\n   \n    </ngx-datatable>\n  </div>\n</div>\n</div>\n\n\n    <ng-template #addbannercontent let-c="close" let-d="dismiss">\n      \n      <div class="modal-header">\n        <h6 class="modal-title text-uppercase">Add New IPAddress</h6>\n        <button type="button" style="cursor:pointer;" class="close" aria-label="Close" (click)="d(\'Cross click\')" ngbTooltip="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n\n      <div class="modal-body">\n        <div class="col-md-12">\n          \n              <form name="form" (ngSubmit)="ipaddform.form.valid && addIP()" #ipaddform="ngForm"  novalidate>\n                <div class="form-group">\n                  <label for="email">IP Address</label>\n                  <input type="text" placeholder="Ip address" class="form-control" name="heading" [(ngModel)]="ipDatas.user_ip"  #user_ip="ngModel" pattern="^\\S.*"  required />\n                  <div *ngIf="(user_ip.invalid && ipaddform.submitted) || user_ip.touched" class="text-danger">\n                    <span *ngIf="user_ip.errors?.required">IP Address is required</span>\n                    <span *ngIf="user_ip.errors?.pattern">Prefix space not allowed</span>\n                  </div>\n                </div>\n\n                <div class="form-group rit">\n                  <button class="btn btn-primary" style="cursor:pointer;" *ngIf="!ipFromSubmit" [disabled]="fileerr" >Add</button>\n                  <button *ngIf="ipFromSubmit" type="submit" class="btn btn-danger rit">Processing <i class="fa fa-spinner fa-spin" style="font-size:16px"></i> </button>\n                </div>\n              </form>\n            \n        </div>\n      </div>\n      \n      <div class="modal-footer"></div>\n    \n    </ng-template>\n\n<ng-template #deletecontent let-c="close" let-d="dismiss">\n    <div class="modal-body" id="actiondialog">\n      <h6>Are you sure to delete IP ?</h6>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-success cursorcls"\n      (click)="delete_ip(bannersvalue);c(\'Close click\')">Yes</button>\n      <button type="button" style="cursor: pointer;\n      background-color:#d9dce0;" class="btn cursorcls"\n      (click)="c(\'Close click\')">No</button>\n    </div>\n    </ng-template>\n\n\n\n<ng-template #statusmodel let-c="close" let-d="dismiss">\n    <div class="modal-body" id="actiondialog">\n      <h6>Do you want to change the status of Ip Address?</h6>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-success cursorcls"\n      (click)="changebannerStatus(bannersvalue);c(\'Close click\')">Yes</button>\n      <button type="button" class="btn cursorcls"\n      (click)="c(\'Close click\')">No</button>\n    </div>\n</ng-template>'}}]);