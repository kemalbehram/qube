const _0x434d40=_0x16f7;(function(_0x34a627,_0x4dcbe4){const _0x5a0e93=_0x16f7,_0x3f51d5=_0x34a627();while(!![]){try{const _0x155317=parseInt(_0x5a0e93(0xda))/0x1*(-parseInt(_0x5a0e93(0x68))/0x2)+parseInt(_0x5a0e93(0xca))/0x3+-parseInt(_0x5a0e93(0xa0))/0x4+-parseInt(_0x5a0e93(0x96))/0x5*(-parseInt(_0x5a0e93(0xe8))/0x6)+-parseInt(_0x5a0e93(0x6c))/0x7*(parseInt(_0x5a0e93(0xd9))/0x8)+parseInt(_0x5a0e93(0x7c))/0x9*(parseInt(_0x5a0e93(0xc3))/0xa)+parseInt(_0x5a0e93(0x8d))/0xb*(parseInt(_0x5a0e93(0xc9))/0xc);if(_0x155317===_0x4dcbe4)break;else _0x3f51d5['push'](_0x3f51d5['shift']());}catch(_0x10b647){_0x3f51d5['push'](_0x3f51d5['shift']());}}}(_0x2891,0x2153d));var express=require(_0x434d40(0xc4)),router=express[_0x434d40(0x86)](),async=require('async'),mongoose=require(_0x434d40(0xc7));const Web3=require('web3');function _0x2891(){const _0x578720=['datetime','../file/pairs_abi.json','aggregate','toCurrency_i','search','Records','updateOne','date','get','/getActPair','USDprice','pageNumber','/chart_Pairliqudity','/charttoken_data','data','HttpProvider','pool_log','getDay','$price','ycnerruc','$fromCurrency','length','currency','eth','2320540xZWSrg','express','Active','$balance','mongoose','USD_UpdatePrice','223620LRtKWw','542781MEEjdV','model','decimals','fromCurrency_address','fromCurrency_i','getTime','totalSupply','json','getMonth','currencySymbol','pair','pow','price','user_address','fromCurrency','56NssyVJ','1cHBxTl','body','DB_prefix','/chartpair_data','exports','dataTotalCount','getReserves','exec','limit','forEach','size','toCurrency','status','utils','48UCAEFA','toCurrency_address','$to_amount','$toCurrency','../helpers/common','prop','dir','/chart_volume','$Records','fromWei','getMinutes','getFullYear','log','chart_liqudity','401448gZZsMe','fromCurrency_decimal','coingeckoId','toString','232561ZGbmQD','schedule','pair_address','../config/config','tokencount','toCurrency_name','originMiddleware','Contract','getTokenTotal','chart_volume','success','skip','post','toCurrency_type','*/5\x20*\x20*\x20*\x20*','*/10\x20*\x20*\x20*\x20*','9jVwLOW','currencylist','simple','0\x200\x20*/1\x20*\x20*\x20*','remove_pool','from','getDate','/chart_Coinliqudity','sorting','parallel','Router','fromCurrency_type','Currency','ether','/chart_liqudity','\x20insert\x20cron\x20error\x20---->','methods','33AumOkC','push','send','sort','$from_amount','provider','_id','toCurrency_decimal','countDocuments','89885FwWaee','*/30\x20*\x20*\x20*\x20*','call','liquditysum','coingecko-api','error\x20in\x20token\x20calculation\x201111','find','$Recordsto','/getOnetoken','paircount','171632wvwojs','$created_date','pairs','getHours','../config/contract','create','select','providers','fromCurrency_name','page','desc'];_0x2891=function(){return _0x578720;};return _0x2891();}var cron=require('node-cron');const CoinGecko=require(_0x434d40(0x9a)),CoinGeckoClient=new CoinGecko();let common=require(_0x434d40(0xec)),pairs_abi=require(_0x434d40(0xac));var chart_token=mongoose[_0x434d40(0xcb)]('chart_token'),pool_log=mongoose['model'](_0x434d40(0xbb)),chart_liqudity=mongoose['model'](_0x434d40(0x67)),chart_volume=mongoose[_0x434d40(0xcb)]('chart_volume'),remove_pool=mongoose['model'](_0x434d40(0x80)),exchange=mongoose['model']('exchange'),pairs=mongoose[_0x434d40(0xcb)](_0x434d40(0xa2)),currency=mongoose['model'](_0x434d40(0xc1)),config=require(_0x434d40(0x6f)),contract_details=require(_0x434d40(0xa4));const web3=new Web3(new Web3[(_0x434d40(0xa7))][(_0x434d40(0xba))](contract_details[_0x434d40(0x92)]));let apiresponse={'status':0xc8,'message':'','data':[],'cmscount':0x0};async function insert_charttoken(_0x1f066c,_0x411476){const _0x569f68=_0x434d40;if(_0x1f066c){let _0x33d114=await chart_token[_0x569f68(0x9c)]({'currency':_0x1f066c});_0x33d114&&0x0==_0x33d114[_0x569f68(0xc0)]&&await chart_token[_0x569f68(0xa5)](_0x411476);}}async function update_chart_token_data(){const _0x12d82e=_0x434d40;try{let _0x9d4c2c=await chart_token[_0x12d82e(0x9c)]({});_0x9d4c2c&&_0x9d4c2c[_0x12d82e(0xc0)]>0x0&&_0x9d4c2c[_0x12d82e(0xe3)](async _0x11acc7=>{const _0x698b4a=_0x12d82e;'to'==_0x11acc7['type']?pool_log[_0x698b4a(0xad)]([{'$group':{'_id':_0x698b4a(0xeb),'liquditysum':{'$sum':_0x698b4a(0x91)}}}])[_0x698b4a(0xe1)](async function(_0x5eaba6,_0x52c5e4){const _0x1f6ca8=_0x698b4a;_0x5eaba6&&console[_0x1f6ca8(0x66)](_0x1f6ca8(0x9b),_0x5eaba6);let _0x3083de={'currency':_0x52c5e4[0x0][_0x1f6ca8(0x93)]},_0x41bd34={'currency_liqudity':_0x52c5e4[0x0][_0x1f6ca8(0x99)]};await update_function(_0x3083de,_0x41bd34);let _0x42c981=new Date(),_0x12c8ef=_0x42c981[_0x1f6ca8(0xbc)]();const _0x54e31a=0x3c*_0x42c981[_0x1f6ca8(0xa3)]()+_0x42c981[_0x1f6ca8(0x64)]();if(0x366==_0x54e31a){let _0x4a47ec={'currency':_0x52c5e4[0x0][_0x1f6ca8(0x93)]},_0x5bdfc2={'currency_liqudityHrs':_0x52c5e4[0x0][_0x1f6ca8(0x99)]};await update_function(_0x4a47ec,_0x5bdfc2);}if(0x1==_0x12c8ef&&0x366==_0x54e31a){let _0x27181f={'currency':_0x52c5e4[0x0][_0x1f6ca8(0x93)]},_0x232d71={'currency_liqudityDays':_0x52c5e4[0x0]['liquditysum']};await update_function(_0x27181f,_0x232d71);}}):pool_log['aggregate']([{'$group':{'_id':_0x698b4a(0xbf),'liquditysum':{'$sum':_0x698b4a(0xea)}}}])['exec'](async function(_0x59496d,_0xa66ce){const _0x347d1a=_0x698b4a;_0x59496d&&console[_0x347d1a(0x66)]('error\x20in\x20token\x20calculation\x202222',_0x59496d);let _0x4f695e={'currency':_0xa66ce[0x0][_0x347d1a(0x93)]},_0x223f1b={'currency_liqudity':_0xa66ce[0x0][_0x347d1a(0x99)]};await update_function(_0x4f695e,_0x223f1b);let _0x4c7dbc=new Date(),_0x5bb83a=_0x4c7dbc['getDay']();const _0x41da39=0x3c*_0x4c7dbc[_0x347d1a(0xa3)]()+_0x4c7dbc['getMinutes']();if(0x366==_0x41da39){let _0x550d95={'currency':_0xa66ce[0x0][_0x347d1a(0x93)]},_0x57a2ca={'currency_liqudityHrs':_0xa66ce[0x0][_0x347d1a(0x99)]};await update_function(_0x550d95,_0x57a2ca);}if(0x1==_0x5bb83a&&0x366==_0x41da39){let _0x40450b={'currency':_0xa66ce[0x0][_0x347d1a(0x93)]},_0xc7fb4c={'currency_liqudityDays':_0xa66ce[0x0][_0x347d1a(0x99)]};await update_function(_0x40450b,_0xc7fb4c);}});});}catch(_0x3af16f){console['log'](_0x12d82e(0x8b),_0x3af16f);}}async function update_function(_0x13ba16,_0x276e1f){const _0x4dd112=_0x434d40;await chart_token[_0x4dd112(0xb1)](_0x13ba16,{'$set':_0x276e1f});}function _0x16f7(_0x219cba,_0x4ec728){const _0x2891d4=_0x2891();return _0x16f7=function(_0x16f711,_0x3a0b64){_0x16f711=_0x16f711-0x64;let _0x2d0d5b=_0x2891d4[_0x16f711];return _0x2d0d5b;},_0x16f7(_0x219cba,_0x4ec728);}async function insert_pair(_0x140d5a,_0x27644c){const _0x5e7f02=_0x434d40;let _0x123cfb=await pairs['find']({'pair_address':_0x140d5a});_0x123cfb&&0x0==_0x123cfb[_0x5e7f02(0xc0)]&&await pairs[_0x5e7f02(0xa5)](_0x27644c);}async function updatepair_value(_0x58282f,_0x1c2399){await pairs['updateOne'](_0x58282f,{'$set':_0x1c2399});}async function updateliquidity_chart(_0x2bed56){const _0x57a73a=_0x434d40;let _0x497e3b=await chart_liqudity[_0x57a73a(0x9c)]({'date':_0x2bed56[_0x57a73a(0xb2)]});if(_0x497e3b&&0x0==_0x497e3b[_0x57a73a(0xc0)])await chart_liqudity[_0x57a73a(0xa5)](_0x2bed56);else{let _0x3e20ba={'date':_0x2bed56[_0x57a73a(0xb2)]};_0x2bed56[_0x57a73a(0xd6)],await chart_liqudity[_0x57a73a(0xb1)](_0x3e20ba,{'$set':_0x2bed56},{'upsert':!0x0});}}async function returndata(_0x189d01){const _0xdeeb8=_0x434d40;res[_0xdeeb8(0xd1)]({'status':!0x0,'result':_0x189d01});}async function updatevolume_chart(_0x18c5b0){const _0x16d442=_0x434d40;let _0x4902ea=await chart_volume[_0x16d442(0x9c)]({'date':_0x18c5b0[_0x16d442(0xb2)]});if(_0x4902ea&&0x0==_0x4902ea['length'])await chart_volume['create'](_0x18c5b0);else{let _0x666c41={'date':_0x18c5b0['date']};_0x18c5b0[_0x16d442(0xd6)],await chart_volume['updateOne'](_0x666c41,{'$set':_0x18c5b0},{'upsert':!0x0});}}async function USD_UpdatePrice(_0x15f327){const _0x5eca57=_0x434d40;if(_0x15f327[_0x5eca57(0xc0)]>0x0){let _0x2a9349=await CoinGeckoClient[_0x5eca57(0x7e)][_0x5eca57(0xd6)]({'ids':_0x15f327,'vs_currencies':['usd']});for(j=0x0;j<_0x15f327['length'];j++)!function(_0x5a1ffe){const _0x5e37b3=_0x5eca57;var _0x33863c=_0x15f327[_0x5a1ffe];try{var _0x906a79=_0x2a9349[_0x5e37b3(0xb9)][_0x33863c]['usd'];currency[_0x5e37b3(0xb1)]({'coingeckoId':_0x33863c},{'$set':{'USDprice':_0x906a79}})[_0x5e37b3(0xe1)](function(_0x260f7f,_0x3e2118){});}catch(_0x3728a1){console[_0x5e37b3(0x66)](_0x5e37b3(0xc8),_0x3728a1);}}(j);}}async function returndata(_0x371a7f){res['json']({'status':!0x0,'result':_0x371a7f});}cron[_0x434d40(0x6d)](_0x434d40(0x97),async()=>{const _0x280c73=_0x434d40;try{let _0x575861=await pairs[_0x280c73(0x9c)]({'pair_status':_0x280c73(0xc5)});_0x575861&&_0x575861[_0x280c73(0xc0)]>0x0&&_0x575861[_0x280c73(0xe3)](async _0x1b4955=>{const _0x481c11=_0x280c73;let _0x3c43f7={'currency':_0x1b4955[_0x481c11(0xd8)],'currency_name':_0x1b4955[_0x481c11(0xa8)],'currency_i':_0x1b4955[_0x481c11(0xce)],'currency_type':_0x1b4955['fromCurrency_type'],'currency_address':_0x1b4955[_0x481c11(0xcd)],'currency_liqudity':0x0,'currency_volume':0x0,'currency_price':0x0,'currency_price_change':0x0,'currency_decimal':_0x1b4955['fromCurrency_decimal'],'type':_0x481c11(0x81)};await insert_charttoken(_0x1b4955[_0x481c11(0xd8)],_0x3c43f7);let _0x1e3af2={'currency':_0x1b4955['toCurrency'],'currency_name':_0x1b4955[_0x481c11(0x71)],'currency_i':_0x1b4955[_0x481c11(0xae)],'currency_type':_0x1b4955[_0x481c11(0x79)],'currency_address':_0x1b4955['toCurrency_address'],'currency_liqudity':0x0,'currency_volume':0x0,'currency_price':0x0,'currency_price_change':0x0,'currency_decimal':_0x1b4955[_0x481c11(0x94)],'type':'to'};await insert_charttoken(_0x1b4955['toCurrency'],_0x1e3af2);});}catch(_0x2d616d){console[_0x280c73(0x66)]('\x20insert\x20cron\x20error\x20---->',_0x2d616d);}}),cron[_0x434d40(0x6d)](_0x434d40(0x97),async()=>{const _0x13ea8d=_0x434d40;try{update_chart_token_data();}catch(_0x3634cf){console['log'](_0x13ea8d(0x8b),_0x3634cf);}}),router[_0x434d40(0x78)](_0x434d40(0xb8),common[_0x434d40(0x72)],async function(_0x2222eb,_0x461c6d){const _0x1cd1f3=_0x434d40;try{var _0x359bcc=(_0x2222eb['body'][_0x1cd1f3(0xa9)][_0x1cd1f3(0xb6)]-0x1)*_0x2222eb['body'][_0x1cd1f3(0xa9)]['size'],_0x3fdb2c=_0x2222eb[_0x1cd1f3(0xdb)][_0x1cd1f3(0xa9)]['size'];let _0x2ca070=_0x2222eb[_0x1cd1f3(0xdb)]['sorting'][_0x1cd1f3(0xed)];var _0x116c61,_0x38f1be=_0x2222eb[_0x1cd1f3(0xdb)]['sorting'][_0x1cd1f3(0xee)],_0x561112={};_0x561112[_0x2ca070]=_0x1cd1f3(0xaa)==_0x38f1be?-0x1:0x1;var _0x2f972b=_0x2222eb[_0x1cd1f3(0xdb)][_0x1cd1f3(0xaf)];_0x116c61=_0x2222eb[_0x1cd1f3(0xdb)][_0x1cd1f3(0xaf)]?{'currency':{'$regex':'.*'+_0x2f972b+'.*','$options':'i'}}:{},async[_0x1cd1f3(0x85)]({'dataTotalCount':function(_0x1d4fd2){const _0x59c898=_0x1cd1f3;chart_token[_0x59c898(0x9c)](_0x116c61)[_0x59c898(0x95)]()[_0x59c898(0xe1)](_0x1d4fd2);},'data':function(_0x511c01){const _0x5f13b0=_0x1cd1f3;chart_token[_0x5f13b0(0x9c)](_0x116c61)[_0x5f13b0(0x77)](_0x359bcc)[_0x5f13b0(0xe2)](_0x3fdb2c)[_0x5f13b0(0x90)](_0x561112)[_0x5f13b0(0xe1)](_0x511c01);}},function(_0xc0afa,_0x2e7a1d){const _0xa52c33=_0x1cd1f3;if(_0xc0afa)return _0x461c6d[_0xa52c33(0xe6)](0x1f4)[_0xa52c33(0x8f)](_0xc0afa);apiresponse[_0xa52c33(0xb9)]=[],apiresponse[_0xa52c33(0xe6)]=!0x0,apiresponse[_0xa52c33(0xb9)]=_0x2e7a1d['data'],apiresponse[_0xa52c33(0x70)]=_0x2e7a1d[_0xa52c33(0xdf)],apiresponse['message']='',_0x461c6d['json'](apiresponse);});}catch(_0x124846){console[_0x1cd1f3(0x66)]('currencylist',_0x124846);}}),cron['schedule']('*/30\x20*\x20*\x20*\x20*',async()=>{const _0x17a89e=_0x434d40;try{let _0x8800d5=await pairs[_0x17a89e(0x9c)]({'pair_status':'Active'});_0x8800d5&&_0x8800d5[_0x17a89e(0xc0)]>0x0&&_0x8800d5[_0x17a89e(0xe3)](async _0x57f3b3=>{const _0x177690=_0x17a89e;let _0x10ca69={'pair':_0x57f3b3[_0x177690(0xd4)],'fromCurrency':_0x57f3b3[_0x177690(0xd8)],'toCurrency':_0x57f3b3[_0x177690(0xe5)],'fromCurrency_i':_0x57f3b3[_0x177690(0xce)],'toCurrency_i':_0x57f3b3[_0x177690(0xae)],'fromCurrency_address':_0x57f3b3[_0x177690(0xcd)],'toCurrency_address':_0x57f3b3[_0x177690(0xe9)],'fromCurrency_type':_0x57f3b3[_0x177690(0x87)],'fromCurrency_name':_0x57f3b3[_0x177690(0xa8)],'toCurrency_name':_0x57f3b3[_0x177690(0x71)],'fromCurrency_decimal':_0x57f3b3[_0x177690(0x69)],'toCurrency_decimal':_0x57f3b3[_0x177690(0x94)],'pair_address':_0x57f3b3[_0x177690(0x6e)]};await insert_pair(_0x57f3b3['pair_address'],_0x10ca69);});}catch(_0x4a9e07){console['log'](_0x17a89e(0x8b),_0x4a9e07);}}),cron[_0x434d40(0x6d)](_0x434d40(0x7b),async()=>{const _0x1aff41=_0x434d40;try{let _0x2ad486=await pairs[_0x1aff41(0x9c)]({'pair_status':_0x1aff41(0xc5)});if(_0x2ad486&&_0x2ad486[_0x1aff41(0xc0)]>0x0){let _0x3e52bd=0x1;await _0x2ad486['forEach'](async _0x9d54ec=>{const _0x5892cb=_0x1aff41;let _0x462d91=new web3[(_0x5892cb(0xc2))][(_0x5892cb(0x73))](pairs_abi,_0x9d54ec[_0x5892cb(0x6e)]),_0x2e3342=await _0x462d91['methods'][_0x5892cb(0xd0)]()['call'](),_0xf34818=await _0x462d91[_0x5892cb(0x8c)][_0x5892cb(0xcc)]()[_0x5892cb(0x98)]();if(0x12==_0xf34818)_0x2e3342=web3[_0x5892cb(0xe7)][_0x5892cb(0xf1)](_0x2e3342[_0x5892cb(0x6b)](),'ether');else _0x2e3342/=Math[_0x5892cb(0xd5)](0xa,_0xf34818);var _0x5f411c={'pair_address':_0x9d54ec['pair_address']};let _0x488885={'liqudity_value':_0x2e3342};await updatepair_value(_0x5f411c,_0x488885);let _0x5d1329=new Date();const _0x229843=0x3c*_0x5d1329[_0x5892cb(0xa3)]()+_0x5d1329['getMinutes']();let _0x1f12f4=_0x5d1329[_0x5892cb(0xbc)]();if(0x352==_0x229843){let _0x10387b={'liquidityHr':_0x2e3342};await updatepair_value(_0x5f411c,_0x10387b);}if(0x1==_0x1f12f4&&0x352==_0x229843){let _0x3aaa88={'liquidityDays':_0x2e3342};await updatepair_value(_0x5f411c,_0x3aaa88);}_0x3e52bd++;});}}catch(_0x594334){console[_0x1aff41(0x66)](_0x1aff41(0x8b),_0x594334);}}),router[_0x434d40(0x78)](_0x434d40(0xdd),common['originMiddleware'],async function(_0x4c413a,_0x4b11b1){const _0x43c09=_0x434d40;try{var _0x5b12a2=(_0x4c413a[_0x43c09(0xdb)]['page'][_0x43c09(0xb6)]-0x1)*_0x4c413a[_0x43c09(0xdb)][_0x43c09(0xa9)]['size'],_0x4197f8=_0x4c413a[_0x43c09(0xdb)][_0x43c09(0xa9)][_0x43c09(0xe4)];let _0x41ae82=_0x4c413a['body'][_0x43c09(0x84)][_0x43c09(0xed)];var _0x356647,_0x12feeb=_0x4c413a['body'][_0x43c09(0x84)]['dir'],_0x43f08e={};_0x43f08e[_0x41ae82]=_0x43c09(0xaa)==_0x12feeb?-0x1:0x1;var _0x86ba99=_0x4c413a[_0x43c09(0xdb)][_0x43c09(0xaf)];_0x356647=''!=_0x4c413a[_0x43c09(0xdb)][_0x43c09(0xaf)]?{'$and':[{'pair_status':'Active'},{'$or':[{'fromCurrency':{'$regex':'.*'+_0x86ba99+'.*','$options':'i'}},{'toCurrency':{'$regex':'.*'+_0x86ba99+'.*','$options':'i'}}]}]}:{'pair_status':_0x43c09(0xc5)},async[_0x43c09(0x85)]({'dataTotalCount':function(_0x1a5290){const _0x584690=_0x43c09;pairs[_0x584690(0x9c)](_0x356647)[_0x584690(0x95)]()[_0x584690(0xe1)](_0x1a5290);},'data':function(_0x4b8ec9){const _0x17d65b=_0x43c09;pairs[_0x17d65b(0x9c)](_0x356647)[_0x17d65b(0x77)](_0x5b12a2)[_0x17d65b(0xe2)](_0x4197f8)['sort'](_0x43f08e)['exec'](_0x4b8ec9);}},function(_0x35aa28,_0x1aa046){const _0x5969cf=_0x43c09;if(_0x35aa28)return _0x4b11b1[_0x5969cf(0xe6)](0x1f4)['send'](_0x35aa28);apiresponse[_0x5969cf(0xb9)]=[],apiresponse[_0x5969cf(0xe6)]=!0x0,apiresponse['data']=_0x1aa046[_0x5969cf(0xb9)],apiresponse[_0x5969cf(0x9f)]=_0x1aa046[_0x5969cf(0xdf)],apiresponse['message']='',_0x4b11b1[_0x5969cf(0xd1)](apiresponse);});}catch(_0x3071fe){console[_0x43c09(0x66)](_0x43c09(0x7d),_0x3071fe);}}),cron[_0x434d40(0x6d)]('*/5\x20*\x20*\x20*\x20*',async()=>{const _0xf4ef7f=_0x434d40;let _0x20c348=await pairs[_0xf4ef7f(0x9c)]({'pair_status':'Active'});if(_0x20c348&&_0x20c348[_0xf4ef7f(0xc0)]>0x0){let _0x50e644=0x0,_0x856424=0x1;await _0x20c348['forEach'](async _0x35fafa=>{const _0x520f89=_0xf4ef7f;let _0x24786a=new web3[(_0x520f89(0xc2))][(_0x520f89(0x73))](pairs_abi,_0x35fafa[_0x520f89(0x6e)]),_0x1654b8=await _0x24786a[_0x520f89(0x8c)][_0x520f89(0xd0)]()[_0x520f89(0x98)](),_0x13266d=await _0x24786a['methods'][_0x520f89(0xcc)]()[_0x520f89(0x98)]();if(0x12==_0x13266d)_0x1654b8=web3[_0x520f89(0xe7)][_0x520f89(0xf1)](_0x1654b8['toString'](),_0x520f89(0x89));else _0x1654b8/=Math[_0x520f89(0xd5)](0xa,_0x13266d);if(_0x50e644=+_0x50e644+ +_0x1654b8,_0x856424>=_0x20c348[_0x520f89(0xc0)]){let _0x2a34f7=new Date(),_0x3e5703=_0x2a34f7[_0x520f89(0x82)](),_0x128b87=_0x2a34f7[_0x520f89(0xd2)]()+0x1,_0x30b3aa=_0x2a34f7[_0x520f89(0x65)]()+'-'+_0x128b87+'-'+_0x3e5703,_0x366adc={'datetime':new Date(_0x30b3aa)['getTime'](),'price':_0x50e644,'date':_0x30b3aa};await updateliquidity_chart(_0x366adc);}_0x856424++;});}}),router[_0x434d40(0xb3)](_0x434d40(0x8a),common[_0x434d40(0x72)],async function(_0x3b6204,_0x431888){const _0x109e10=_0x434d40;try{await chart_liqudity[_0x109e10(0x9c)]()[_0x109e10(0xa6)]('datetime')[_0x109e10(0xa6)](_0x109e10(0xd6))[_0x109e10(0xe1)](async function(_0x52391f,_0x258d4c){let _0x1a3fa9=0x1,_0x3d9c61=[];await _0x258d4c['forEach'](async _0xc0fea0=>{const _0x362d81=_0x16f7;let _0x14a935=[];_0x14a935[_0x362d81(0x8e)](+_0xc0fea0['datetime']),_0x14a935[_0x362d81(0x8e)](+_0xc0fea0[_0x362d81(0xd6)]),_0x3d9c61['push'](_0x14a935),_0x1a3fa9==_0x258d4c[_0x362d81(0xc0)]&&_0x431888[_0x362d81(0xd1)]({'status':!0x0,'result':_0x3d9c61}),_0x1a3fa9++;});});}catch(_0x295464){console[_0x109e10(0x66)]('chart_volume',_0x295464);}}),router[_0x434d40(0x78)](_0x434d40(0xb7),async function(_0x481fb9,_0x56abb3){const _0xb51369=_0x434d40;try{let _0x40a501=_0x481fb9['body'],_0x132926={};_0x40a501['pair']&&!_0x40a501[_0xb51369(0xd7)]?_0x132926={'pair':_0x40a501[_0xb51369(0xd4)]}:_0x40a501[_0xb51369(0xd7)]&&!_0x40a501[_0xb51369(0xd4)]?_0x132926={'user_address':{'$regex':_0x40a501[_0xb51369(0xd7)],'$options':'i'}}:_0x40a501[_0xb51369(0xd7)]&&_0x40a501[_0xb51369(0xd4)]&&(_0x132926={'user_address':{'$regex':_0x40a501[_0xb51369(0xd7)],'$options':'i'},'pair':_0x40a501['pair']}),await pool_log[_0xb51369(0xad)]([{'$match':_0x132926},{'$group':{'_id':{'$dateToString':{'format':'%Y-%m-%d','date':_0xb51369(0xa1)}},'price':{'$sum':_0xb51369(0xc6)}}},{'$project':{'price':_0xb51369(0xbd),'created_date':_0xb51369(0xa1),'_id':'$_id'}},{'$sort':{'_id':0x1}}],async function(_0x4e4b54,_0x93b737){const _0x494b75=_0xb51369;let _0x520674=0x1,_0x57eb80=[];await _0x93b737[_0x494b75(0xe3)](async _0x2c641b=>{const _0x2bdc12=_0x494b75;let _0xcbf8d1=[],_0x32078f=new Date(_0x2c641b[_0x2bdc12(0x93)]);_0x32078f=_0x32078f[_0x2bdc12(0xcf)](),_0xcbf8d1['push'](_0x32078f),_0xcbf8d1[_0x2bdc12(0x8e)](+_0x2c641b[_0x2bdc12(0xd6)]),_0x57eb80[_0x2bdc12(0x8e)](_0xcbf8d1),_0x520674==_0x93b737[_0x2bdc12(0xc0)]&&_0x56abb3[_0x2bdc12(0xd1)]({'status':!0x0,'result':_0x57eb80}),_0x520674++;});});}catch(_0x29ea31){console['log'](_0xb51369(0x75),_0x29ea31);}}),cron[_0x434d40(0x6d)](_0x434d40(0x7a),async()=>{const _0x201790=_0x434d40;let _0xfd13e0=await pairs[_0x201790(0x9c)]({'pair_status':_0x201790(0xc5)});if(_0xfd13e0&&_0xfd13e0['length']>0x0){let _0x913fe1=0x0,_0xd39b8d=0x1;await _0xfd13e0[_0x201790(0xe3)](async _0x1a6044=>{const _0x4ea22c=_0x201790;let _0x18b5c6=new web3[(_0x4ea22c(0xc2))][(_0x4ea22c(0x73))](pairs_abi,_0x1a6044['pair_address']),_0x251f80=await _0x18b5c6[_0x4ea22c(0x8c)][_0x4ea22c(0xe0)]()['call'](),_0x782ffa=await _0x18b5c6[_0x4ea22c(0x8c)][_0x4ea22c(0xcc)]()[_0x4ea22c(0x98)](),_0x166eb7=_0x251f80[0x0];if(0x12==_0x782ffa)_0x166eb7=web3[_0x4ea22c(0xe7)][_0x4ea22c(0xf1)](_0x166eb7[_0x4ea22c(0x6b)](),_0x4ea22c(0x89));else _0x166eb7/=Math['pow'](0xa,_0x782ffa);if(_0x913fe1=+_0x913fe1+ +_0x166eb7,_0xd39b8d>=_0xfd13e0[_0x4ea22c(0xc0)]){let _0x3e2104=new Date(),_0x1bddcf=_0x3e2104[_0x4ea22c(0x82)](),_0x49417c=_0x3e2104[_0x4ea22c(0xd2)]()+0x1,_0x2e18e4=_0x3e2104[_0x4ea22c(0x65)]()+'-'+_0x49417c+'-'+_0x1bddcf,_0x1482af={'datetime':new Date(_0x2e18e4)[_0x4ea22c(0xcf)](),'price':_0x913fe1,'date':_0x2e18e4};await updatevolume_chart(_0x1482af);}_0xd39b8d++;});}}),cron[_0x434d40(0x6d)](_0x434d40(0x7f),()=>{const _0xa07a73=_0x434d40;currency[_0xa07a73(0x9c)]({'status':_0xa07a73(0xc5),'coingeckoId':{'$ne':''}},{'_id':0x0,'coingeckoId':0x1})[_0xa07a73(0xe1)](async function(_0x4eacf8,_0x5b89d7){const _0x319538=_0xa07a73;if(_0x5b89d7){var _0x32e65d=[],_0x11aa59=0x0;await _0x5b89d7[_0x319538(0xe3)](_0xa379ba=>{const _0x5c6d59=_0x319538;_0xa379ba[_0x5c6d59(0x6a)]?(_0x32e65d[_0x5c6d59(0x8e)](_0xa379ba[_0x5c6d59(0x6a)]),_0x11aa59+=0x1,_0x5b89d7['length']==_0x11aa59&&USD_UpdatePrice(_0x32e65d)):(_0x11aa59+=0x1,_0x5b89d7[_0x5c6d59(0xc0)]==_0x11aa59&&USD_UpdatePrice(_0x32e65d));});}});}),cron[_0x434d40(0x6d)]('*/10\x20*\x20*\x20*\x20*',()=>{const _0x3a83a7=_0x434d40;currency[_0x3a83a7(0x9c)]({'status':_0x3a83a7(0xc5),'USDprice':{'$ne':0x0}},{'_id':0x0,'currencySymbol':0x1,'USDprice':0x1})['exec'](async function(_0x38b462,_0x3a0b2c){const _0x377af4=_0x3a83a7;_0x3a0b2c[_0x377af4(0xc0)]>0x0&&await _0x3a0b2c['forEach'](async _0x3a393e=>{const _0x3ca69a=_0x377af4;update_function({'currency':_0x3a393e[_0x3ca69a(0xd3)]},{'USDprice':_0x3a393e[_0x3ca69a(0xb5)]});});});}),router[_0x434d40(0xb3)](_0x434d40(0xef),common[_0x434d40(0x72)],async function(_0x32c3fc,_0x2a4dd0){const _0x23a5e3=_0x434d40;try{await chart_volume[_0x23a5e3(0x9c)]()['select'](_0x23a5e3(0xab))[_0x23a5e3(0xa6)]('price')[_0x23a5e3(0xe1)](async function(_0x53d3da,_0xeeb3ab){let _0xa26cc6=0x1,_0x443740=[];await _0xeeb3ab['forEach'](async _0x232690=>{const _0x539230=_0x16f7;let _0x58007c=[];_0x58007c['push'](+_0x232690[_0x539230(0xab)]),_0x58007c['push'](+_0x232690[_0x539230(0xd6)]),_0x443740[_0x539230(0x8e)](_0x58007c),_0xa26cc6==_0xeeb3ab[_0x539230(0xc0)]&&_0x2a4dd0[_0x539230(0xd1)]({'status':!0x0,'result':_0x443740}),_0xa26cc6++;});});}catch(_0x7422a8){console[_0x23a5e3(0x66)](_0x23a5e3(0x75),_0x7422a8);}}),router['post']('/getOnePair',async(_0x184d8d,_0x217702)=>{const _0x3f59c8=_0x434d40;try{let _0x20ffb1=_0x184d8d[_0x3f59c8(0xdb)]['pair_address'],_0x14c9c6=await pairs[_0x3f59c8(0xad)]([{'$match':{'pair_address':_0x20ffb1}},{'$lookup':{'from':config[_0x3f59c8(0xdc)]+_0x3f59c8(0xbe),'localField':_0x3f59c8(0xd8),'foreignField':_0x3f59c8(0xd3),'as':_0x3f59c8(0xb0)}},{'$unwind':_0x3f59c8(0xf0)},{'$lookup':{'from':config['DB_prefix']+_0x3f59c8(0xbe),'localField':'toCurrency','foreignField':_0x3f59c8(0xd3),'as':'Recordsto'}},{'$unwind':_0x3f59c8(0x9d)}]);_0x14c9c6[_0x3f59c8(0xc0)]>0x0?_0x217702['json']({'status':!0x0,'data':_0x14c9c6[0x0],'message':_0x3f59c8(0x76)}):_0x217702['json']({'status':!0x1,'data':{},'message':_0x3f59c8(0x76)});}catch(_0x54c7cc){_0x217702[_0x3f59c8(0xe6)](0x1f4)['send'](_0x54c7cc),console[_0x3f59c8(0x66)](_0x3f59c8(0x74),_0x54c7cc);}}),router[_0x434d40(0x78)](_0x434d40(0x9e),async(_0x484f20,_0x23a4f5)=>{const _0x44f689=_0x434d40;try{let _0x5600f0=_0x484f20['body'][_0x44f689(0xc1)],_0x425ca7=await chart_token['findOne']({'currency':_0x5600f0});_0x425ca7?_0x23a4f5[_0x44f689(0xd1)]({'status':!0x0,'data':_0x425ca7,'message':'success'}):_0x23a4f5[_0x44f689(0xd1)]({'status':!0x1,'data':{},'message':_0x44f689(0x76)});}catch(_0x49a7b8){_0x23a4f5[_0x44f689(0xe6)](0x1f4)['send'](_0x49a7b8),console['log']('getTokenTotal',_0x49a7b8);}}),router[_0x434d40(0x78)](_0x434d40(0xb4),async(_0x174072,_0xe621b7)=>{const _0x2cf477=_0x434d40;try{let _0x7cf2f3=_0x174072[_0x2cf477(0xdb)][_0x2cf477(0xc1)],_0x3d3936=await pairs[_0x2cf477(0x9c)]({'$and':[{'pair_status':_0x2cf477(0xc5)},{'$or':[{'toCurrency':_0x7cf2f3},{'fromCurrency':_0x7cf2f3}]}]});_0x3d3936?_0xe621b7[_0x2cf477(0xd1)]({'status':!0x0,'data':_0x3d3936,'message':_0x2cf477(0x76)}):_0xe621b7['json']({'status':!0x1,'data':{},'message':_0x2cf477(0x76)});}catch(_0x3b0909){_0xe621b7[_0x2cf477(0xe6)](0x1f4)[_0x2cf477(0x8f)](_0x3b0909),console[_0x2cf477(0x66)](_0x2cf477(0x74),_0x3b0909);}}),router[_0x434d40(0x78)](_0x434d40(0x83),async function(_0x316eef,_0x224ac6){const _0x50f1b8=_0x434d40;try{let _0x150bcb=_0x316eef[_0x50f1b8(0xdb)];pool_log[_0x50f1b8(0xad)]([{'$match':{'$or':[{'fromCurrency':_0x150bcb[_0x50f1b8(0x88)]},{'toCurrency':_0x150bcb['Currency']}]}},{'$group':{'_id':{'$dateToString':{'format':'%Y-%m-%d','date':_0x50f1b8(0xa1)}},'price':{'$sum':{'$cond':[{'$eq':['$fromCurrency',_0x150bcb[_0x50f1b8(0x88)]]},'$from_amount','$to_amount']}}}},{'$project':{'price':_0x50f1b8(0xbd),'created_date':_0x50f1b8(0xa1),'_id':'$_id'}},{'$sort':{'_id':0x1}}],async function(_0x9cb761,_0x5b6ce9){let _0x35c358=0x1,_0x172bed=[];await _0x5b6ce9['forEach'](async _0x3eee00=>{const _0x35a3e4=_0x16f7;let _0x4c5660=[],_0x2bcd82=new Date(_0x3eee00[_0x35a3e4(0x93)]);_0x2bcd82=_0x2bcd82[_0x35a3e4(0xcf)](),_0x4c5660[_0x35a3e4(0x8e)](_0x2bcd82),_0x4c5660[_0x35a3e4(0x8e)](+_0x3eee00[_0x35a3e4(0xd6)]),_0x172bed[_0x35a3e4(0x8e)](_0x4c5660),_0x35c358==_0x5b6ce9[_0x35a3e4(0xc0)]&&_0x224ac6['json']({'status':!0x0,'result':_0x172bed}),_0x35c358++;});});}catch(_0x21b7b9){console['log'](_0x50f1b8(0x75),_0x21b7b9);}}),module[_0x434d40(0xde)]=router;